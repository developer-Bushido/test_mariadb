datadir="/var/lib/proxysql"

admin_variables=
{
  admin_credentials="admin:{{ proxysql_users.admin.password }}"
  mysql_ifaces="127.0.0.1:6032;/tmp/proxysql_admin.sock"
  refresh_interval=2000
  admin-cluster_credentials="cluster_user:{{ proxysql_users.cluster_user.password }}"
}

proxysql_servers =
(
{% for host in groups['proxysql'] %}
    {
    hostname="{{ host }}"
    port=6032
	weight=0
	comment="{{ host }}"
    }{% if not loop.last %},{% endif %}
{% endfor %}
)

mysql_variables=
{
	threads=4,
	max_connections=2048,
	default_query_delay=0,
	default_query_timeout=36000000,
	have_compress=true,
	poll_timeout=2000,
	interfaces="0.0.0.0:6033;/tmp/proxysql.sock",
	default_schema="information_schema",
	stacksize=1048576,
	server_version="5.5.30",
	connect_timeout_server=3000,
	monitor_history=600000,
	monitor_connect_interval=60000,
	monitor_ping_interval=10000,
	ping_interval_server_msec=10000,
	ping_timeout_server=200,
	commands_stats=true,
	sessions_sort=true
}

